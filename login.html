<DOCTYPE html>
<html lang="eng">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOGIN</title>
    <link rel="stylesheet" href="atividade.css">
        
</head>

<body>
    <h2>login</h2>
    <form id="form">
        <label>email</label>
        <input type="email" id="email" required>

        <label>senha</label>
        <input type="password" id="senha" required>

        <button type="submit">Enviar</button>
    </form>
</body>
<script defer>
    function validarUsuarioESenha(email,senha) {
        if (!email.includes("@")) {
            alert ('conclua o email corretamente');
            return false;
        if (senha.length < 6) {
            alert (' a senha deve ter pelo menos 6 caracteres');
            return false;
        }
        return true;
        }
    }
    
    let Usuarios = JSON.parse(localStorage.getItem('usuarios')) || {};
    function registrarOuLogarUsuario(email, senha){
        if(!validarUsuarioESenha(email, senha)){
            return
        }

        if (!Usuarios[email]) {
            localStorage.setItem('usuarios', JSON.stringify(Usuarios));
            alert('Usuario registrado com sucesso');
        } else {
            if (usuarios[email] === senha) {
                alert('login realizado com sucesso');
                
                localStorage.setItem('usuarioLogado'. email);
                window.location.href = 'sucesso.html'
            } else {
                alert('Senha incorreta')
            }
        }
    }

    const formulario = document.getElementById('form');
    formulario.addEventListener('submit', function(evento) {
        evento.preventDefault();

        const email = document.getElementById('email').value;
        const senha = document.getElementById('senha').value;
        
        registrarOuLogarUsuario(email,senha);
    });
    </script>

</html>